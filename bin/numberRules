#!/usr/bin/perl

# Run this on the markdown source to sequentially renumber the rules
# in each section.  Writes a new version of the markdown source
# to stndard output.

use strict;
use warnings;

my @rct = (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);

while (<>) {
  print, next unless /^\*\*Rule (\d+)-\d+ /;
  s/^\*\*Rule (\d+)-\d+ //;
  my $snum = $1;
  my $rnum = ++$rct[$snum];
  print "**Rule ${snum}-${rnum} $_";
}
  
